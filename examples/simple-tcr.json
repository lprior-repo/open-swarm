{
  "id": "simple-tcr-workflow",
  "name": "Simple Test-Commit-Revert Workflow",
  "description": "A basic single-agent workflow that implements the TCR (Test-Commit-Revert) pattern for safe code changes",
  "version": "1.0",
  "type": "tcr",
  "metadata": {
    "author": "Open Swarm",
    "created": "2025-12-12",
    "tags": ["tcr", "single-agent", "basic"],
    "complexity": "beginner"
  },
  "workflow": {
    "steps": [
      {
        "id": "bootstrap",
        "name": "Bootstrap Agent",
        "description": "Initialize agent session and setup",
        "type": "setup",
        "actions": [
          {
            "action": "session_start",
            "description": "Register agent identity and check inbox"
          },
          {
            "action": "reserve_files",
            "pattern": "pkg/**/*.go",
            "reason": "Simple TCR workflow implementation"
          }
        ]
      },
      {
        "id": "prompt_execution",
        "name": "Execute Prompt",
        "description": "Send task prompt to agent for implementation",
        "type": "execute",
        "config": {
          "prompt_template": "Implement the following feature in pkg/example/hello.go: Add a Greet function that takes a name and returns 'Hello, {name}!'",
          "timeout_seconds": 300,
          "max_retries": 1
        }
      },
      {
        "id": "run_tests",
        "name": "Run Tests",
        "description": "Execute tests to verify implementation",
        "type": "test",
        "config": {
          "command": "go test ./pkg/example/... -v",
          "expected_output": "PASS",
          "timeout_seconds": 60
        }
      },
      {
        "id": "commit_or_revert",
        "name": "Commit or Revert",
        "description": "Commit changes if tests pass, revert if they fail",
        "type": "gate",
        "conditions": [
          {
            "if": "tests_passed",
            "then": {
              "action": "git_commit",
              "message": "feat: Implement Greet function in pkg/example/hello.go"
            }
          },
          {
            "else": {
              "action": "git_revert",
              "message": "Tests failed, reverting changes"
            }
          }
        ]
      },
      {
        "id": "cleanup",
        "name": "Cleanup and End Session",
        "description": "Release file reservations and end session",
        "type": "teardown",
        "actions": [
          {
            "action": "release_files"
          },
          {
            "action": "session_end"
          }
        ]
      }
    ],
    "failure_handling": {
      "strategy": "revert_on_test_failure",
      "max_attempts": 1,
      "on_failure": "terminate_and_report"
    }
  },
  "agents": [
    {
      "id": "agent-1",
      "role": "implementer",
      "resources": {
        "memory_mb": 512,
        "cpu_cores": 1,
        "timeout_minutes": 5
      }
    }
  ],
  "expected_artifacts": {
    "files": ["pkg/example/hello.go"],
    "tests": ["pkg/example/hello_test.go"],
    "commits": 1
  }
}
